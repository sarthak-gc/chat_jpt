generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id       String @id @default(uuid())
  username String @unique

  googleId String? @unique
  email    String? @unique

  conversations Conversation[]
}

model Conversation {
  id     String @id @default(uuid())
  title  String
  userId String

  messages  Message[]
  user      User      @relation(fields: [userId], references: [id])
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
}

model Message {
  id             String @id @default(uuid())
  conversationId String
  content        String

  role         Role
  type         MessageType
  conversation Conversation @relation(fields: [conversationId], references: [id])
  createdAt    DateTime     @default(now())
}

enum MessageType {
  IMAGEFILE
  TEXT
}

enum Role {
  User
  AI
}
